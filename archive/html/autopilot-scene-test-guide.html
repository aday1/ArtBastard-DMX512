<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autopilot & Scene Management Test Guide</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            color: #333;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            margin: 20px 0;
            overflow: hidden;
        }
        .test-header {
            background: #495057;
            color: white;
            padding: 15px 20px;
            font-weight: bold;
            font-size: 1.1em;
        }
        .test-content {
            padding: 20px;
        }
        .step {
            margin: 15px 0;
            padding: 10px 15px;
            background: white;
            border-left: 4px solid #007bff;
            border-radius: 4px;
        }
        .step-number {
            background: #007bff;
            color: white;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 10px;
            font-size: 0.9em;
        }
        .expected-result {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            font-weight: 500;
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .feature-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .feature-title {
            color: #495057;
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 10px;
        }
        .check-list {
            list-style: none;
            padding: 0;
        }
        .check-list li {
            margin: 5px 0;
            padding-left: 25px;
            position: relative;
        }
        .check-list li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #28a745;
            font-weight: bold;
        }
        .path-demo {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 15px 0;
        }
        .path-item {
            background: white;
            border: 2px solid #007bff;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            font-weight: bold;
            color: #007bff;
            min-width: 80px;
        }
        .midi-section {
            background: #e7f3ff;
            border: 2px solid #007bff;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        .midi-header {
            color: #007bff;
            font-weight: bold;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üéØ Autopilot & Scene Management Test Guide</h1>
        <p>Comprehensive testing guide for automated lighting control features</p>
    </div>

    <!-- Quick Start Testing -->
    <div class="test-section">
        <div class="test-header">üöÄ Quick Start Test</div>
        <div class="test-content">
            <div class="step">
                <span class="step-number">1</span>
                <strong>Open Transport Controls:</strong> Ensure the Transport Controls panel is visible in the bottom-right corner.
            </div>
            <div class="step">
                <span class="step-number">2</span>
                <strong>Check Tabs:</strong> Verify three tabs are present: Transport, Autopilot, Scenes.
            </div>
            <div class="step">
                <span class="step-number">3</span>
                <strong>Quick Autopilot Test:</strong> Click Autopilot tab ‚Üí Select "Circle" ‚Üí Click play button (‚ñ∂).
            </div>
            <div class="expected-result">
                ‚úÖ Expected: Pan/Tilt fixtures should begin circular movement, progress bar should animate.
            </div>
        </div>
    </div>

    <!-- Autopilot Testing -->
    <div class="test-section">
        <div class="test-header">üéØ Autopilot System Testing</div>
        <div class="test-content">
            <h3>Path Type Testing</h3>
            <div class="path-demo">
                <div class="path-item">Circle</div>
                <div class="path-item">Figure 8</div>
                <div class="path-item">Star</div>
                <div class="path-item">Square</div>
                <div class="path-item">Triangle</div>
                <div class="path-item">Linear</div>
                <div class="path-item">Random</div>
            </div>

            <div class="step">
                <span class="step-number">1</span>
                <strong>Circle Path Test:</strong>
                <ul>
                    <li>Select "Circle" from path dropdown</li>
                    <li>Set Speed: 1.0, Size: 50%, Center X: 50%, Center Y: 50%</li>
                    <li>Click play button (‚ñ∂)</li>
                </ul>
                <div class="expected-result">
                    ‚úÖ Expected: Smooth circular motion, centered, medium size
                </div>
            </div>

            <div class="step">
                <span class="step-number">2</span>
                <strong>Speed Control Test:</strong>
                <ul>
                    <li>While autopilot is running, adjust speed slider</li>
                    <li>Test values: 0.1 (slow), 2.0 (fast), 5.0 (very fast)</li>
                </ul>
                <div class="expected-result">
                    ‚úÖ Expected: Movement speed changes immediately, progress bar updates accordingly
                </div>
            </div>

            <div class="step">
                <span class="step-number">3</span>
                <strong>Size Control Test:</strong>
                <ul>
                    <li>Adjust Size slider from 10% to 100%</li>
                    <li>Observe Pan/Tilt range changes</li>
                </ul>
                <div class="expected-result">
                    ‚úÖ Expected: Movement amplitude scales proportionally
                </div>
            </div>

            <div class="step">
                <span class="step-number">4</span>
                <strong>Center Position Test:</strong>
                <ul>
                    <li>Adjust Center X and Center Y sliders</li>
                    <li>Test corners: (0,0), (100,100), (50,0), (0,50)</li>
                </ul>
                <div class="expected-result">
                    ‚úÖ Expected: Pattern moves to new center position while maintaining shape
                </div>
            </div>

            <div class="step">
                <span class="step-number">5</span>
                <strong>All Path Types Test:</strong>
                <ul>
                    <li>Test each path type individually</li>
                    <li>Verify distinct movement patterns</li>
                    <li>Check Star pattern has 5-pointed shape</li>
                    <li>Verify Square has sharp corners</li>
                    <li>Confirm Figure-8 crosses in center</li>
                </ul>
                <div class="expected-result">
                    ‚úÖ Expected: Each pattern shows unique characteristics, mathematically correct shapes
                </div>
            </div>

            <div class="warning">
                ‚ö†Ô∏è Note: Autopilot requires fixtures with Pan and Tilt channels. Without moving head fixtures, you won't see movement.
            </div>
        </div>
    </div>

    <!-- Scene Management Testing -->
    <div class="test-section">
        <div class="test-header">üé¨ Scene Management Testing</div>
        <div class="test-content">
            <div class="step">
                <span class="step-number">1</span>
                <strong>Scene Capture Test:</strong>
                <ul>
                    <li>Set up lighting (adjust dimmer, colors, etc.)</li>
                    <li>Click Scenes tab</li>
                    <li>Click camera button (üì∏) to capture scene</li>
                </ul>
                <div class="expected-result">
                    ‚úÖ Expected: New scene appears in list with auto-generated name and channel count
                </div>
            </div>

            <div class="step">
                <span class="step-number">2</span>
                <strong>Scene Loading Test:</strong>
                <ul>
                    <li>Change lighting setup (different colors/levels)</li>
                    <li>Click play button (‚ñ∂) next to saved scene</li>
                </ul>
                <div class="expected-result">
                    ‚úÖ Expected: Lighting returns to captured state, scene highlighted as current
                </div>
            </div>

            <div class="step">
                <span class="step-number">3</span>
                <strong>Multiple Scenes Test:</strong>
                <ul>
                    <li>Create 3-5 different scenes with varying lighting</li>
                    <li>Test loading each scene individually</li>
                    <li>Verify scene counter updates (1/5, 2/5, etc.)</li>
                </ul>
                <div class="expected-result">
                    ‚úÖ Expected: Each scene loads correctly, counter shows current position
                </div>
            </div>

            <div class="step">
                <span class="step-number">4</span>
                <strong>Scene Navigation Test:</strong>
                <ul>
                    <li>Use previous (‚èÆ) and next (‚è≠) buttons</li>
                    <li>Test cycling through all scenes</li>
                    <li>Verify wrapping (last scene ‚Üí first scene)</li>
                </ul>
                <div class="expected-result">
                    ‚úÖ Expected: Smooth navigation, proper cycling, disabled buttons when no scenes
                </div>
            </div>

            <div class="step">
                <span class="step-number">5</span>
                <strong>Auto Scene Mode Test:</strong>
                <ul>
                    <li>Set auto interval to 3 seconds</li>
                    <li>Click auto scene button (üîÑ)</li>
                    <li>Observe automatic scene cycling</li>
                </ul>
                <div class="expected-result">
                    ‚úÖ Expected: Scenes change automatically every 3 seconds, status indicator shows "SCENE"
                </div>
            </div>

            <div class="step">
                <span class="step-number">6</span>
                <strong>Scene Deletion Test:</strong>
                <ul>
                    <li>Click delete button (üóë) on a scene</li>
                    <li>Verify scene is removed from list</li>
                    <li>Check scene counter updates correctly</li>
                </ul>
                <div class="expected-result">
                    ‚úÖ Expected: Scene deleted immediately, list updates, counters adjust
                </div>
            </div>
        </div>
    </div>

    <!-- MIDI Learning Testing -->
    <div class="test-section">
        <div class="test-header">üéõÔ∏è MIDI Learning Testing</div>
        <div class="test-content">
            <div class="midi-section">
                <div class="midi-header">Prerequisites:</div>
                <ul>
                    <li>MIDI controller connected to computer</li>
                    <li>Browser has MIDI access enabled</li>
                    <li>Test with various MIDI messages (notes, CC controls)</li>
                </ul>
            </div>

            <div class="step">
                <span class="step-number">1</span>
                <strong>Basic MIDI Learn Test:</strong>
                <ul>
                    <li>Click any "M" button next to a control</li>
                    <li>Button should start flashing/pulsing</li>
                    <li>Send MIDI note or CC from controller within 5 seconds</li>
                </ul>
                <div class="expected-result">
                    ‚úÖ Expected: Button stops flashing, MIDI mapping saved
                </div>
            </div>

            <div class="step">
                <span class="step-number">2</span>
                <strong>Transport MIDI Test:</strong>
                <ul>
                    <li>Learn Record, Play, and Stop buttons</li>
                    <li>Test each MIDI trigger activates correct function</li>
                    <li>Verify stop button stops both autopilot and auto-scene</li>
                </ul>
                <div class="expected-result">
                    ‚úÖ Expected: MIDI triggers work like clicking buttons
                </div>
            </div>

            <div class="step">
                <span class="step-number">3</span>
                <strong>Autopilot MIDI Test:</strong>
                <ul>
                    <li>Learn autopilot toggle button</li>
                    <li>Test starting/stopping autopilot via MIDI</li>
                    <li>Verify MIDI trigger works while autopilot is running</li>
                </ul>
                <div class="expected-result">
                    ‚úÖ Expected: MIDI can start/stop autopilot, status indicators update
                </div>
            </div>

            <div class="step">
                <span class="step-number">4</span>
                <strong>Scene MIDI Test:</strong>
                <ul>
                    <li>Learn scene capture, auto toggle, previous, and next</li>
                    <li>Test scene capture via MIDI</li>
                    <li>Test scene navigation via MIDI</li>
                    <li>Test auto scene mode via MIDI</li>
                </ul>
                <div class="expected-result">
                    ‚úÖ Expected: All scene functions work via MIDI, new scenes appear in list
                </div>
            </div>

            <div class="step">
                <span class="step-number">5</span>
                <strong>MIDI Learning Timeout Test:</strong>
                <ul>
                    <li>Click "M" button to start learning</li>
                    <li>Wait 5+ seconds without sending MIDI</li>
                    <li>Verify learning mode stops automatically</li>
                </ul>
                <div class="expected-result">
                    ‚úÖ Expected: Button stops flashing after 5 seconds, no mapping saved
                </div>
            </div>
        </div>
    </div>

    <!-- Integration Testing -->
    <div class="test-section">
        <div class="test-header">üîÑ Integration Testing</div>
        <div class="test-content">
            <div class="step">
                <span class="step-number">1</span>
                <strong>Autopilot + Scenes Test:</strong>
                <ul>
                    <li>Start autopilot with Circle pattern</li>
                    <li>Capture a scene while autopilot is running</li>
                    <li>Load a different scene</li>
                    <li>Verify autopilot continues with new lighting</li>
                </ul>
                <div class="expected-result">
                    ‚úÖ Expected: Autopilot movement continues, but with scene's lighting values
                </div>
            </div>

            <div class="step">
                <span class="step-number">2</span>
                <strong>Auto Scene + Manual Changes Test:</strong>
                <ul>
                    <li>Start auto scene mode</li>
                    <li>Manually adjust lighting between scene changes</li>
                    <li>Observe what happens on next scene change</li>
                </ul>
                <div class="expected-result">
                    ‚úÖ Expected: Manual changes overridden when next scene loads
                </div>
            </div>

            <div class="step">
                <span class="step-number">3</span>
                <strong>Stop All Function Test:</strong>
                <ul>
                    <li>Start both autopilot and auto scene mode</li>
                    <li>Click transport Stop button</li>
                    <li>Verify both systems stop</li>
                </ul>
                <div class="expected-result">
                    ‚úÖ Expected: Both autopilot and auto scene stop, status indicators disappear
                </div>
            </div>

            <div class="step">
                <span class="step-number">4</span>
                <strong>Panel Docking Test:</strong>
                <ul>
                    <li>Test drag/drop panel positioning</li>
                    <li>Test dock/undock functionality</li>
                    <li>Verify all controls work in both docked and floating modes</li>
                </ul>
                <div class="expected-result">
                    ‚úÖ Expected: Panel moves correctly, all functions work regardless of position
                </div>
            </div>
        </div>
    </div>

    <!-- Performance Testing -->
    <div class="test-section">
        <div class="test-header">‚ö° Performance Testing</div>
        <div class="test-content">
            <div class="step">
                <span class="step-number">1</span>
                <strong>High-Speed Autopilot Test:</strong>
                <ul>
                    <li>Set autopilot speed to maximum (5.0)</li>
                    <li>Run for 2-3 minutes</li>
                    <li>Monitor CPU usage and frame rate</li>
                </ul>
                <div class="expected-result">
                    ‚úÖ Expected: Smooth operation, no lag or frame drops
                </div>
            </div>

            <div class="step">
                <span class="step-number">2</span>
                <strong>Multiple Scene Loading Test:</strong>
                <ul>
                    <li>Create 10+ scenes with complex lighting</li>
                    <li>Test rapid scene switching</li>
                    <li>Set auto scene interval to 1 second</li>
                </ul>
                <div class="expected-result">
                    ‚úÖ Expected: Fast scene changes, no memory leaks, smooth operation
                </div>
            </div>

            <div class="step">
                <span class="step-number">3</span>
                <strong>Combined Load Test:</strong>
                <ul>
                    <li>Run autopilot + auto scenes + manual MIDI controls simultaneously</li>
                    <li>Monitor system performance</li>
                    <li>Test for 10+ minutes</li>
                </ul>
                <div class="expected-result">
                    ‚úÖ Expected: Stable operation, no crashes, responsive controls
                </div>
            </div>
        </div>
    </div>

    <!-- Troubleshooting -->
    <div class="test-section">
        <div class="test-header">üîß Troubleshooting Guide</div>
        <div class="test-content">
            <div class="feature-grid">
                <div class="feature-card">
                    <div class="feature-title">Autopilot Not Moving</div>
                    <ul class="check-list">
                        <li>Check fixtures have Pan/Tilt channels</li>
                        <li>Verify fixtures are selected</li>
                        <li>Ensure autopilot is started (play button pressed)</li>
                        <li>Check path settings (size > 10%)</li>
                    </ul>
                </div>
                
                <div class="feature-card">
                    <div class="feature-title">Scenes Not Saving</div>
                    <ul class="check-list">
                        <li>Verify lighting is active (DMX values > 0)</li>
                        <li>Check scene appears in list after capture</li>
                        <li>Ensure sufficient browser storage</li>
                    </ul>
                </div>
                
                <div class="feature-card">
                    <div class="feature-title">MIDI Learning Failed</div>
                    <ul class="check-list">
                        <li>Check MIDI device is connected</li>
                        <li>Verify browser MIDI permissions</li>
                        <li>Send MIDI within 5-second window</li>
                        <li>Try different MIDI message types</li>
                    </ul>
                </div>
                
                <div class="feature-card">
                    <div class="feature-title">Performance Issues</div>
                    <ul class="check-list">
                        <li>Reduce autopilot speed</li>
                        <li>Limit number of active scenes</li>
                        <li>Close other browser tabs</li>
                        <li>Check CPU/memory usage</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="test-section">
        <div class="test-header">‚úÖ Test Completion Checklist</div>
        <div class="test-content">
            <ul class="check-list">
                <li>All autopilot path types work correctly</li>
                <li>Speed, size, and center controls function properly</li>
                <li>Scene capture and loading work reliably</li>
                <li>Auto scene cycling operates smoothly</li>
                <li>Scene navigation functions correctly</li>
                <li>MIDI learning works for all controls</li>
                <li>Transport buttons integrate properly</li>
                <li>Status indicators show correct states</li>
                <li>Panel docking/positioning works</li>
                <li>Performance is stable under load</li>
                <li>All visual feedback is appropriate</li>
                <li>Error handling is graceful</li>
            </ul>
        </div>
    </div>

    <div style="text-align: center; margin-top: 40px; padding: 20px; background: #f8f9fa; border-radius: 8px;">
        <h3>üéâ Testing Complete!</h3>
        <p>If all tests pass, the autopilot and scene management system is ready for production use.</p>
        <p><strong>Report any issues with specific test numbers for faster debugging.</strong></p>
    </div>
</body>
</html>
